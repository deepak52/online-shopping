{"ast":null,"code":"import _regeneratorRuntime from \"/Users/dsabu001/Desktop/my-s5-project/Shopping-Cart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(login_Saga),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(signup_Saga),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(getAllProducts_Saga),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(watchUser);\n\nimport { put, takeLatest, call, all } from 'redux-saga/effects';\nimport { login, signup } from '../api/user.api';\n\nfunction login_Saga(data) {\n  var response, user;\n  return _regeneratorRuntime.wrap(function login_Saga$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          debugger;\n          console.log(\"login saga being hit 2\");\n          _context.prev = 2;\n          _context.next = 5;\n          return login(data.payload);\n\n        case 5:\n          response = _context.sent;\n\n          if (!(response.status === 200)) {\n            _context.next = 21;\n            break;\n          }\n\n          debugger;\n          user = response.data;\n\n          if (!(user && Object.keys(user).length > 0)) {\n            _context.next = 19;\n            break;\n          }\n\n          localStorage.setItem('token', JSON.stringify(response.data.token));\n          _context.next = 13;\n          return put({\n            type: '@user/saga_action/message',\n            payload: {\n              status: \"message\",\n              text: \"\"\n            }\n          });\n\n        case 13:\n          _context.next = 15;\n          return put({\n            type: '@user/saga_action/load_user',\n            payload: response.data\n          });\n\n        case 15:\n          _context.next = 17;\n          return put({\n            type: '@user/saga_action/redirect_user',\n            payload: {\n              redirect: \"redirect_to_home\"\n            }\n          });\n\n        case 17:\n          _context.next = 21;\n          break;\n\n        case 19:\n          _context.next = 21;\n          return put({\n            type: '@user/saga_action/message',\n            payload: {\n              status: \"message\",\n              text: response.data.message\n            }\n          });\n\n        case 21:\n          _context.next = 27;\n          break;\n\n        case 23:\n          _context.prev = 23;\n          _context.t0 = _context[\"catch\"](2);\n          _context.next = 27;\n          return put({\n            type: '@user/saga_action/message',\n            payload: {\n              status: \"error\",\n              text: 'Invalid Credentials'\n            }\n          });\n\n        case 27:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[2, 23]]);\n}\n\nfunction signup_Saga(data) {\n  var response;\n  return _regeneratorRuntime.wrap(function signup_Saga$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return signup(data.payload);\n\n        case 3:\n          response = _context2.sent;\n\n          if (!(response.status === 201)) {\n            _context2.next = 9;\n            break;\n          }\n\n          _context2.next = 7;\n          return put({\n            type: '@user/saga_action/load_user',\n            payload: response.data.user\n          });\n\n        case 7:\n          _context2.next = 12;\n          break;\n\n        case 9:\n          if (!(response.status === 200)) {\n            _context2.next = 12;\n            break;\n          }\n\n          _context2.next = 12;\n          return put({\n            type: '@user/saga_action/message',\n            payload: {\n              status: \"message\",\n              text: response.data.message\n            }\n          });\n\n        case 12:\n          _context2.next = 14;\n          return put({\n            type: '@user/saga_action/redirect_user',\n            payload: {\n              redirect: \"redirect_to_home\"\n            }\n          });\n\n        case 14:\n          _context2.next = 20;\n          break;\n\n        case 16:\n          _context2.prev = 16;\n          _context2.t0 = _context2[\"catch\"](0);\n          _context2.next = 20;\n          return put({\n            type: '@user/saga_action/load_user',\n            payload: {}\n          });\n\n        case 20:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, null, [[0, 16]]);\n}\n\nfunction getAllProducts_Saga(data) {\n  return _regeneratorRuntime.wrap(function getAllProducts_Saga$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          debugger;\n          console.log(\"saga 1\");\n          _context3.next = 4;\n          return put({\n            type: '@user/saga_action/load_user',\n            payload: data\n          });\n\n        case 4:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}\n\nexport default function watchUser() {\n  return _regeneratorRuntime.wrap(function watchUser$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return all([takeLatest('@user/component/login', login_Saga), takeLatest('@user/component/register', signup_Saga) //takeLatest('LIST_ALL_PRODUCTS', getAllProducts_Saga)\n          ]);\n\n        case 2:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4);\n}","map":{"version":3,"sources":["/Users/dsabu001/Desktop/my-s5-project/Shopping-Cart/src/sagas/user.saga.js"],"names":["login_Saga","signup_Saga","getAllProducts_Saga","watchUser","put","takeLatest","call","all","login","signup","data","console","log","payload","response","status","user","Object","keys","length","localStorage","setItem","JSON","stringify","token","type","text","redirect","message"],"mappings":"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","sourcesContent":["import { put, takeLatest, call, all } from 'redux-saga/effects';\nimport { login, signup } from '../api/user.api'\n\nfunction* login_Saga(data) {\n    debugger\n    console.log(\"login saga being hit 2\")\n    try {\n        let response = yield login(data.payload);\n        if (response.status === 200) {\n            debugger\n            let user = response.data;\n            if (user && Object.keys(user).length > 0) {\n                localStorage.setItem('token', JSON.stringify(response.data.token));\n                yield put({\n                    type: '@user/saga_action/message',\n                    payload: { status: \"message\", text: \"\" }\n                });\n                yield put({\n                    type: '@user/saga_action/load_user',\n                    payload: response.data\n                });\n                yield put({\n                    type: '@user/saga_action/redirect_user',\n                    payload: {redirect: \"redirect_to_home\"}\n                });\n            } else {\n                yield put({\n                    type: '@user/saga_action/message',\n                    payload: { status: \"message\", text: response.data.message }\n                });\n            }\n\n        } \n    } catch (e) {\n        yield put({\n            type: '@user/saga_action/message',\n            payload: { status: \"error\", text: 'Invalid Credentials' }\n        });\n    }\n}\n\nfunction* signup_Saga(data) { \n    try {\n        let response = yield signup(data.payload);\n        if (response.status === 201) {\n            yield put({\n                type: '@user/saga_action/load_user',\n                payload: response.data.user\n            });\n        } else if (response.status === 200) {\n            yield put({\n                type: '@user/saga_action/message',\n                payload: { status: \"message\", text: response.data.message }\n            });\n        }\n        yield put({\n            type: '@user/saga_action/redirect_user',\n            payload: {redirect: \"redirect_to_home\"}\n        });\n    } catch (e) {\n        yield put({\n            type: '@user/saga_action/load_user',\n            payload: {}\n        });\n    }\n}\n\nfunction* getAllProducts_Saga(data) {\n    debugger\n    console.log(\"saga 1\")\n    yield put({\n        type: '@user/saga_action/load_user',\n        payload: data\n    });\n}\n\nexport default function* watchUser() {\n    yield all([\n        takeLatest('@user/component/login', login_Saga),\n        takeLatest('@user/component/register', signup_Saga),\n        //takeLatest('LIST_ALL_PRODUCTS', getAllProducts_Saga)\n\n    ])\n} "]},"metadata":{},"sourceType":"module"}